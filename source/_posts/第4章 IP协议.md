---
title: 第4章 IP协议
date: 2021-06-25
swiper: false # 将改文章放入轮播图中
categories: 计算机网络
tags: [《图解TCP/IP》]
swiperImg: 'https://img12.360buyimg.com/ddimg/jfs/t1/175123/37/16655/281913/60d586beEc7ef737a/16612132f2eddf6d.jpg' # 该文章在轮播图中的图片
img: 'https://img12.360buyimg.com/ddimg/jfs/t1/175123/37/16655/281913/60d586beEc7ef737a/16612132f2eddf6d.jpg' # 该文章图片，可以是本地目录下图片也可以是http://xxx图片
top: false
---
## 4.1.1 IP相当于OSI模型的网络层
**数据链路层中通过MAC地址来识别同一个链路中不同主机，而一旦跨越多种数据链路就要用到网络层，而IP地址就是用于网络层中区分不同的主机**
## 4.1.2 网络层和数据链路层的关系

- **比如用户A要去地点B旅行：**
   - **数据链路层就相当于途中每一站的火车票，只能一个个区域移动**
   - **网络层相当于整个旅途的行程表，规划好从A要去B的路线**
- **所以数据链路层和网络层缺一不可，没有数据链路相当于没有车票就无法去往目的地，没有网络层就不知道每一站去哪**

## 4.2.2 路由控制
- **首先是"跳"，指的是网络中的一个区间，即同一个数据链路**
- **数据链路层负责一跳之间的传输，网络层中的路由控制即IP决定下一跳的路径，最终实现目标地址的通信**

### 路由控制表：
**每个主机和路由器都维护一张路由控制表，记录各个网络和路由器的配对关系**

   - ![](https://img12.360buyimg.com/ddimg/jfs/t1/174139/15/16121/138429/60d53bd3E1490cad1/223862e27edc29c9.jpg)

## 4.2.4 IP属于面向无连接，不需要建立连接即可发送

## 4.3 IP地址的基础知识

### 4.3.1 IP地址定义
**IP地址是TCP/IP通信时候，用于识别主机和路由器的标识**
**IPV4由32位二进制组成，习惯表示为4个十进制的整数：192.168.1.1**
### 4.3.2 IP地址由网络地址和主机地址组成
**首先IP地址由网络地址和主机地址组成**
**为了判断网络地址，引入了子网掩码。将IP地址和子网掩码AND运算就可以得到网络地址**
### 4.3.3 IP地址分类
![](https://pic3.zhimg.com/v2-7438cb1ba454ffe278f5c2310e69f3aa_b.png)
### 4.3.6 子网掩码
**子网掩码也是32位的二进制表示，他用1表示IP的网络地址位置，用0表示IP地址主机地址位置，比如C类IP地址子网掩码：11111111 11111111 11111111 00000000**
## 4.4 路由控制

- **每个路由器和主机都有一张路由控制表，记录网络地址和对应的路由器地址**
- **发送IP数据包时，首先确定包首部的目标IP地址，从路由控制表中查找对应的路由器地址并发送给下一个路由器**
   - ![](https://img13.360buyimg.com/ddimg/jfs/t1/196104/38/10116/123501/60d582ebEaf339829/f1689f2f210b8e8d.jpg)

## 4.5 IP分片
**不同数据链路则MTU就不同。MTU即最大传输单元**
**当IP数据报太大，MTU小，无法在一帧内传输，路由器就会将它分片，传输到主机后，再根据IP首部识别码重组**
