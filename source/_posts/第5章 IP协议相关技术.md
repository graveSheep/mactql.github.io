---
title: 第5章 IP协议相关技术
date: 2021-06-26
swiper: false # 将改文章放入轮播图中
categories: 《图解TCP/IP》
swiperImg: 'https://img11.360buyimg.com/ddimg/jfs/t1/181527/35/11183/1528743/60d68543E4ed237f1/d577d17fe3b3cdf2.jpg' # 该文章在轮播图中的图片
img: 'https://img11.360buyimg.com/ddimg/jfs/t1/181527/35/11183/1528743/60d68543E4ed237f1/d577d17fe3b3cdf2.jpg' # 该文章图片，可以是本地目录下图片也可以是http://xxx图片
tags: [计算机网络]
top: false
---
## 5.2 DNS
**平时访问网站用IP地址很不方便，一般都是用主机名（域名）**
**为了实现用主机名（域名）替代IP地址的功能，主机会利用hosts数据文件，也就是DNS**
### DNS是怎么查询IP地址的？

- **首先向最近的DNS服务器查询IP地址，如果有就返回，没有就向根域名服务器查询**
   - ![](https://img14.360buyimg.com/ddimg/jfs/t1/188784/3/10285/175846/60d5da27E70bb3d0c/788c7379b5553333.jpg)

---

## 5.3 ARP
### 5.3.1 ARP是什么？

- **在数据链路层中我们需要查找目标IP地址的MAC地址，可以通过广播发送一个ARP请求包，询问目标IP的MAC地址**
   - ![](https://img12.360buyimg.com/ddimg/jfs/t1/182434/3/11078/83772/60d5dc4dE12cf50af/5306723c38908076.jpg)
- **为了防止每发一次数据就要一次ARP请求，会将MAC地址和IP地址的映射关系缓存在主机中，即ARP缓存表**

### 5.3.3 IP地址和MAC地址为什么缺一不可？

- **首先在第4章 IP协议中的4.1.2说明了网络层和数据链路层为什么缺一不可**
- **主机A和主机B如果不在同一个数据链路中，也就是不在同一个网段，主机A想要发送数据给主机B，必须要经过路由器。如果只知道主机A和主机B的MAC地址，主机A在自己的网段中找不到主机B的MAC，便会发送数据给路由器，但是这时候如果没有IP协议和ARP地址解析协议，是无法进行路由控制，获取路由器的MAC，这样主机A的数据就到达不了路由器，更到达不了主机B**

### 5.3.4 RARP
**和ARP相反，通过自己的MAC地址查询自己的IP地址**

---

## 5.4 ICMP
### 5.4.1 ICMP是什么？

- **在IP通信中，如果因为某种原因没到目的地，那么目的地的路由器就会发一个ICMP包，包中有发生问题的原因**
   - ![](https://img11.360buyimg.com/ddimg/jfs/t1/175355/24/16654/103299/60d6833bE555ce6c8/a123d6fbb4e5a9f4.jpg)

---

## 5.5 DHCP
**DHCP是用来自动分配IP地址的**

---

## 5.6 NAT
**NAT是用来对本地网络的私有IP地址和互联网的全局IP地址相互转换**
