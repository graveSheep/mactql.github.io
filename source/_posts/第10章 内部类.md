---
title: 第10章 内部类
date: 2021-06-13
swiper: true # 将改文章放入轮播图中
categories: 《java编程思想》
swiperImg: 'https://img12.360buyimg.com/ddimg/jfs/t1/184852/16/9126/4425471/60c7faacE65d47485/14f78b3803a02243.png' # 该文章在轮播图中的图片
img: 'https://img12.360buyimg.com/ddimg/jfs/t1/184852/16/9126/4425471/60c7faacE65d47485/14f78b3803a02243.png' # 该文章图片，可以是本地目录下图片也可以是http://xxx图片
tags: [java]
top: true
---
## 内部类的好处：

- **将类的代码隐藏在其他类内部。**
- **内部类对象可以访问外部类的所有元素** **。**
- **解决多继承的问题。**
- **内部类可以有多个实例，与外部类独立。**
- **单个外部类可以让多个内部类实现同一个接口或继承同一个类。**

## 一、成员内部类:
```java
public class Outer{
	class Inner{
    }
}
```


### 获取内部类对象实例的方式

- **普通内部类对象隐式的保存了一个指向外部类对象的引用。**
- **new 外部类 . new 内部类。**
- **外部类对象 . new 内部类。**
- **外部类对象 . get方法。**

### 10.3 使用.this和.new

- **内部类中获取外部类对象的引用：外部类.this 。**
- **外部类中访问内部类对象的引用：new 内部类()。**
- **外部类中创建内部类对象必须使用外部类对象来创建内部类对象。**
   - **![image.png](https://img14.360buyimg.com/ddimg/jfs/t1/186931/40/8122/34987/60c75aa2Ec2f56c51/0e6a607f34a6dd50.jpg)**

### 10.4 内部类和向上转型
**内部类也可以和普通类一样拥有向上转型的特性。将内部类向上转型为基类型，尤其是接口时，内部类就有了用武之地。如果内部类是private的，只可以被它的外部类问，从而完全隐藏实现的细节。**

---

## 二、10.5 方法内部类

- **方法中创建类。**
- **类前不能加访问说明符，类中不能有静态成员。**
- **可以访问代码块内的常量和外部类的所有成员。**
### 使用场景：

- **实现了某接口，创建并返回对其的引用。**
- **需要创建一个类辅助解决问题，但不希望这个类公共可用。**
```java
public Object getInner{
	class Inner{
    	...
    }
}
```

---

## 三、10.6 匿名内部类
### 使用场景：

- **只用到类的一个实例，因为不会有对象名称，无法再次调用。**
- **实例化的同时重写方法，等同于创建子类继承父类并重写方法或实现接口。**
- **没有静态成员**
```java
test.getRead(new Person(){ //实例化的同时重写方法，等同于创建子类继承父类并重写方法。
	@Override
    public void read(){
    	...
    }
})
```

---

## 四、10.7 静态内部类（嵌套类）
### 使用场景：

- **不需要内部类对象与外部类有联系。**
### 与普通内部类的区别：

- **普通内部类对象隐式的保存了一个指向外部类对象的引用，而静态内部类没有。**
- **静态内部类创建对象不需要外部类对象。**
- **普通内部类不能有static成员，而静态内部类可以。**
```java
public class Outer{
	static class Inner{
    }
}
```

- **静态内部类中，不能通过对象访问非静态的外部类对象。**
- **创建静态内部类对象：外部类.内部类 类名 = new 外部类.内部类();**

### 10.7.1 接口内部可以放静态内部类
**正常情况接口内部不能放代码，但是静态内部类可以放，自动的public和static。**
```java
public interface A{
    void fun();
	class Test implements A{
    	public void fun(){
        	...
        }
        ...
    }
}
```

---

### 10.9 内部类的继承
**内部类对象隐式的包含对外部类对象的引用，所以在继承内部类的同时，构造器需要通过特殊语法初始化这个引用。**

- **外部类对象 . super()**
```java
class Outer{
	class Inner{}
}

public class A extends Outer,Inner{
    // A(){}不能通过编译。 必须通过外部类对象.super初始化内部类对象对外部类对象的引用。
	A(Outer o){
    	o.super();
    }
}
```
