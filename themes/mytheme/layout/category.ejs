<%
var colorArr = ['#FF00CC','#FF6666','#FF99CC','#FFFF99','#CCFFFF','#FFCCCC','#FF9966','#FF6699','#99CCCC','#CCFF99','#CCFFCC','#6699CC',
'#66CCFF','#66CCCC'];
var colorCount = colorArr.length;
var hashCode = function (str) {
    if (!str && str.length === 0) {
        return 0;
    }
    var hash = 0;
    for (var i = 0, len = str.length; i < len; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash |= 0;
    }
    return hash;
};
var i = 0;
%>
<%
    i++;
    var color = colorArr[Math.abs(hashCode(page.category) % colorCount)];
%>
<div class="bg-dark-floor" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -2;"></div>
<div class="bg-light-floor-categoryDetail" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -3;"></div>

<div class="category-header"  style="background-image:url('<%- url_for(theme.categoryDetail.img) %>')">
  <div class="category-header-title">
    <%= theme.categoryDetail.title %>
  </div>
  <div class="category-header-desc">
    <% if (theme.typed.on === true) { %>
      <span class="title" id="category-header-desc"></span>
      <%- partial('_partial/scripts/typed', { el: '#category-header-desc', type: 'categoryDetail' }) %>
      <% } else {  %>
          <span class="title">
          <%= theme.categoryDetail.desc %>
          </span>
      <% } %>
  </div>
  <div class="mask-box"></div>
</div>

<% if (theme.categoryDetail.video) { %>
<div class="category-video">
  <video class="full-video" autoplay loop muted>
      <source style="width: 100%;height: 100vh;" src="<%- url_for(theme.categoryDetail.video) %>">
  </video>
  <div class="video-header-title">
    <%= theme.categoryDetail.title %>
  </div>
  <div class="video-header-desc">
  <% if (theme.typed.on === true) { %>
      <span class="title" id="categoryDetail-video-header-desc"></span>
      <%- partial('_partial/scripts/typed', { el: '#categoryDetail-video-header-desc', type: 'categoryDetail' }) %>
      <% } else {  %>
          <span class="title">
          <%= theme.categoryDetail.desc %>
          </span>
      <% } %>
  </div>
  <div class="mask-box"></div>
</div>
<% } %>
<div class="category">
  <div class="category-name">
    <div class="name" style="background-color: <%- color %>;"><%= page.category %> <%= __('category') %></div>
  </div>
  <!-- 每一篇文章卡片 -->
  <%- partial('_partial/card/post') %>
</div>
<div class="w-70">
  <%- partial('_partial/paginator') %>
</div>
