<%
var colorArr = ['#FF00CC','#FF6666','#FF99CC','#FFFF99','#CCFFFF','#FFCCCC','#FF9966','#FF6699','#99CCCC','#CCFF99','#CCFFCC','#6699CC',
'#66CCFF','#66CCCC'];
var colorCount = colorArr.length;
var hashCode = function (str) {
    if (!str && str.length === 0) {
        return 0;
    }
    var hash = 0;
    for (var i = 0, len = str.length; i < len; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash |= 0;
    }
    return hash;
};
var i = 0;
%>
<div class="bg-dark-floor" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -2;"></div>
<div class="bg-light-floor-categories" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -3;"></div>

<div class="lazyload categories-header" data-original="<%- url_for(theme.categories.img) %>">
    <div class="categories-header-title">
        <%= theme.categories.title %>
      </div>
      <div class="categories-header-desc">
      <% if (theme.typed.on === true) { %>
        <span class="title" id="categories-header-desc"></span>
        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
            <script>
            var typed = new Typed("#categories-header-desc", {
                strings: ['<%= theme.categories.desc %>'],
                startDelay: <%= theme.typed.startDelay %>,
                typeSpeed: <%= theme.typed.typeSpeed %>,
                loop: true,
                backSpeed: <%= theme.typed.backSpeed %>,
                showCursor: true
            });
            </script>
        <% } else {  %>
            <span class="title">
            <%= theme.categories.desc %>
            </span>
        <% } %>
      </div>
      <div class="mask-box"></div>
</div>

<div class="categories-video">
    <video class="full-video" autoplay loop muted>
        <source style="width: 100%;height: 100vh;" src="<%- url_for(theme.categories.video) %>">
    </video>
    <div class="video-header-title">
        <%= theme.categories.title %>
    </div>
    <div class="video-header-desc">
    <% if (theme.typed.on === true) { %>
        <span class="title" id="video-header-desc"></span>
        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
            <script>
            var typed = new Typed("#video-header-desc", {
                strings: ['<%= theme.categories.desc %>'],
                startDelay: <%= theme.typed.startDelay %>,
                typeSpeed: <%= theme.typed.typeSpeed %>,
                loop: true,
                backSpeed: <%= theme.typed.backSpeed %>,
                showCursor: true
            });
            </script>
        <% } else {  %>
            <span class="title">
            <%= theme.categories.desc %>
            </span>
        <% } %>
    </div>
    <div class="mask-box"></div>
</div>

<div id="categories" class="container">
    <div class="card">
        <div class="card-content">
            <div class="category-title center-align">
                <i class="fa fa-tags"></i>&nbsp;&nbsp;<%= __('postCategoryTitle') %>
            </div>
            <div class="category-chips">
                <% site.categories.map(function(category) { %>
                <%
                    i++;
                    var color = colorArr[Math.abs(hashCode(category.name) % colorCount)];
                %>
                <a href="<%- url_for(category.path) %>" title="<%- category.name %>: <%- category.length %>">
                    <span class="category-content"
                        title="<%- category.name %>" style="background-color: <%- color %>;"><%- category.name %>
                        <span class="category-length"><%- category.length %></span>
                    </span>
                </a>
                <% }); %>
            </div>
        </div>
    </div>
</div>
